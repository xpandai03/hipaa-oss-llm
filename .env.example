# HIPAA-Compliant OSS LLM Configuration
# Copy this file to .env and configure for your environment

# === Ollama Configuration ===
# Private network URL for Ollama service (Render private DNS)
OLLAMA_URL=http://oss-llm:11434/api/chat

# Model to use (pre-pulled in Docker image)
OLLAMA_MODEL=llama3.1:8b-instruct

# Request timeout in seconds
OLLAMA_TIMEOUT=600

# Max retry attempts for failed requests
OLLAMA_MAX_RETRIES=3

# === FastAPI Backend Configuration ===
# Port for the backend service
PORT=8000

# Environment (development, staging, production)
ENVIRONMENT=production

# Session secret key (generate a strong random key for production)
SESSION_SECRET=your-strong-random-session-secret-here

# === HIPAA Compliance Settings ===
# Enable PHI masking in logs
MASK_PHI_IN_LOGS=true

# Log level (INFO recommended, DEBUG may expose sensitive data)
LOG_LEVEL=INFO

# Maximum session duration in minutes
MAX_SESSION_DURATION=30

# === Tool Configuration ===
# Web Search (External - requires PHI redaction)
WEB_SEARCH_ENABLED=true
WEB_SEARCH_PROVIDER=stub  # Options: stub, bing, google (requires BAA)

# File Search (Internal - PHI safe)
FILE_SEARCH_ENABLED=true
DOCUMENT_ENCRYPTION_KEY=your-document-encryption-key-here

# Browser Automation
BROWSER_ACTION_ENABLED=true
BROWSER_ACTION_REQUIRE_CONFIRMATION=true
BROWSER_ACTION_TIMEOUT=300

# === Database Configuration (for production) ===
# Use encrypted database for session and document storage
# DATABASE_URL=postgresql://user:password@db-host:5432/agent_db
# DATABASE_ENCRYPT_AT_REST=true

# === Monitoring and Audit ===
# Enable audit logging for HIPAA compliance
AUDIT_LOG_ENABLED=true
AUDIT_LOG_PATH=/var/log/agent/audit.log

# Metrics collection (no PHI)
METRICS_ENABLED=true
METRICS_PORT=9090

# === Render-specific Configuration ===
# These are automatically set by Render
# RENDER_SERVICE_NAME=
# RENDER_SERVICE_TYPE=
# RENDER_GIT_COMMIT=

# === Optional: External Services with BAA ===
# Only enable if you have signed BAAs with these providers

# Twilio (HIPAA-compliant SMS/Voice)
# TWILIO_ACCOUNT_SID=
# TWILIO_AUTH_TOKEN=
# TWILIO_PHONE_NUMBER=

# SendGrid (HIPAA-compliant email)
# SENDGRID_API_KEY=
# SENDGRID_FROM_EMAIL=

# AWS S3 (HIPAA-compliant storage)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_S3_BUCKET=
# AWS_REGION=us-east-1

# === Security Headers ===
# Configure security headers for web interface
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'"

# === Rate Limiting ===
# Protect against abuse
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# === Feature Flags ===
# Control feature availability
FEATURE_WEBSOCKET_CHAT=true
FEATURE_REST_API=true
FEATURE_TOOLS=true
FEATURE_SESSION_MANAGEMENT=true

# === Debug Settings (NEVER enable in production) ===
DEBUG_MODE=false
DEBUG_SHOW_ERRORS=false
DEBUG_LOG_REQUESTS=false